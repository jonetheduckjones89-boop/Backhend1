# MedCore AI Agent Backend

A fully automated AI agent backend built with Node.js and TypeScript that processes documents (PDF, DOCX) and generates intelligent summaries and actionable items using OpenAI.

## ğŸš€ Features

- **Automated Document Processing**: Upload PDF or DOCX files for instant AI analysis
- **OpenAI Integration**: Leverages GPT-4 for intelligent document understanding
- **Stateless Architecture**: No database required, fully stateless design
- **Type-Safe**: Built with TypeScript for maximum reliability
- **Production-Ready**: Optimized for deployment on Render with Node 20.x

## ğŸ“ Project Structure

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/           # Configuration files
â”‚   â”‚   â”œâ”€â”€ multer.config.ts
â”‚   â”‚   â””â”€â”€ openai.config.ts
â”‚   â”œâ”€â”€ controllers/      # Request handlers
â”‚   â”‚   â”œâ”€â”€ health.controller.ts
â”‚   â”‚   â””â”€â”€ upload.controller.ts
â”‚   â”œâ”€â”€ middlewares/      # Express middlewares
â”‚   â”‚   â”œâ”€â”€ error.middleware.ts
â”‚   â”‚   â””â”€â”€ validation.middleware.ts
â”‚   â”œâ”€â”€ routes/           # API routes
â”‚   â”‚   â”œâ”€â”€ health.routes.ts
â”‚   â”‚   â””â”€â”€ upload.routes.ts
â”‚   â”œâ”€â”€ services/         # Business logic
â”‚   â”‚   â”œâ”€â”€ ai.service.ts
â”‚   â”‚   â””â”€â”€ parser.service.ts
â”‚   â”œâ”€â”€ types/            # TypeScript types
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ app.ts            # Express app setup
â”‚   â””â”€â”€ server.ts         # Server entry point
â”œâ”€â”€ uploads/              # Temporary file storage
â”œâ”€â”€ dist/                 # Compiled JavaScript
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ .env.example
```

## ğŸ› ï¸ Installation

```bash
# Install dependencies
npm install

# Copy environment file
cp .env.example .env

# Add your OpenAI API key to .env
```

## ğŸ”‘ Environment Variables

```env
NODE_ENV=production
PORT=3001
OPENAI_API_KEY=your_openai_api_key_here
FRONTEND_URL=*
```

## ğŸ’» Development

```bash
# Run in development mode with hot reload
npm run dev
```

## ğŸ—ï¸ Build

```bash
# Compile TypeScript to JavaScript
npm run build
```

## â–¶ï¸ Production

```bash
# Start production server
npm start
```

## ğŸ“¡ API Endpoints

### Health Check
```
GET /api/health
```

Response:
```json
{
  "status": "success",
  "message": "AI Agent Backend is running",
  "timestamp": "2025-12-05T03:17:43.000Z",
  "environment": "production"
}
```

### Upload and Analyze Document
```
POST /api/upload
Content-Type: multipart/form-data
```

Request:
- `file`: PDF or DOCX file (max 10MB)

Response:
```json
{
  "status": "success",
  "data": {
    "summary": "Document summary generated by AI...",
    "actions": [
      {
        "id": "uuid-here",
        "title": "Action title",
        "description": "Action description",
        "priority": "high",
        "category": "Category name"
      }
    ],
    "metadata": {
      "fileName": "document.pdf",
      "fileType": "application/pdf",
      "fileSize": 123456,
      "uploadedAt": "2025-12-05T03:17:43.000Z",
      "processedAt": "2025-12-05T03:17:45.000Z",
      "wordCount": 1500,
      "pageCount": 5
    }
  }
}
```

## ğŸš¢ Deployment (Render)

### Configuration

- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm start`
- **Node Version**: 20.x
- **Region**: Singapore
- **Root Directory**: (leave empty)

### Environment Variables

Add in Render dashboard:
- `OPENAI_API_KEY`: Your OpenAI API key

### Auto-Deploy

Push to `main` branch to trigger automatic deployment:

```bash
git add .
git commit -m "Deploy backend"
git push origin main
```

## ğŸ”’ Security Features

- **Helmet.js**: Security headers
- **CORS**: Configurable cross-origin requests
- **File Validation**: Only PDF and DOCX allowed
- **File Size Limits**: 10MB maximum
- **Automatic Cleanup**: Temporary files deleted after processing

## ğŸ“¦ Dependencies

### Production
- `express`: Web framework
- `cors`: CORS middleware
- `helmet`: Security headers
- `multer`: File upload handling
- `pdf-parse`: PDF parsing
- `mammoth`: DOCX parsing
- `openai`: OpenAI API client
- `dotenv`: Environment variables
- `zod`: Schema validation
- `uuid`: Unique ID generation

### Development
- `typescript`: TypeScript compiler
- `ts-node-dev`: Development server
- `@types/*`: TypeScript type definitions

## ğŸ¯ Workflow

1. User uploads PDF or DOCX file
2. Backend validates file type and size
3. File is parsed to extract text content
4. Content is sent to OpenAI for analysis
5. AI generates summary and actionable items
6. Response is returned to frontend
7. Temporary file is automatically deleted

## ğŸ“ License

MIT

## ğŸ¤ Support

For issues or questions, please open an issue in the repository.
